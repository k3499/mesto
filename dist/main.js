!function(){"use strict";class e{constructor(e,t,s){this.title=e.name,this.img=e.link,this._selector=t,this._handleCardClick=s}_deleteClickHandler(){this._element.remove(),this._element=null}_likeClickHandler(){this._element.querySelector(".element__like").classList.toggle("element__like_active")}_getTemplate(){return document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0)}_setEventListeners(){this._element.querySelector(".element__like").addEventListener("click",(()=>{this._handleLike()})),this._element.querySelector(".element__delete").addEventListener("click",(()=>{this._handleDelete()})),this._element.querySelector(".element__image").addEventListener("click",(()=>{this._handleCardClick()}))}_handleOpenImg(){openPopup(lightbox),lightboxImage.src=this.img,lightboxImage.alt=this.title,lightboxCaption.textContent=this.title}_handleLike(){this._element.querySelector(".element__like").classList.toggle("element__like_active")}_handleDelete(){this._element.remove()}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".element__image"),t=this._element.querySelector(".element__title");return e.src=this.img,e.alt=this.title,t.textContent=this.title,this._element}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const s={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};class n{constructor(e,s){t(this,"_showInputError",((e,t)=>{const s=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)})),t(this,"_hideInputError",(e=>{const t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)})),t(this,"_checkInputValidity",(e=>{if(e.validity.valid)this._hideInputError(e);else{const t=e.validationMessage;this._showInputError(e,t)}})),t(this,"_toggleButtonState",(()=>{const e=this._inputList.some((e=>!e.validity.valid)),t=!this._inputList.some((e=>e.value.length>0));e||t?(this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._inactiveButtonClass)):(this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.remove(this._inactiveButtonClass))})),t(this,"_setInputListeners",(()=>{this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))})),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=s,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}enableValidation(){this._setInputListeners()}clearForm(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}class i{constructor(e){this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOnOverlay=this._closePopupOnOverlay.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}_closePopupOnOverlay(e){e.target.classList.contains("popup")&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close()))}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),this._popup.addEventListener("click",this._closePopupOnOverlay)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("click",this._closePopupOnOverlay)}}class r extends i{constructor(e,t){super(e),this._formSubmitHandler=t,this._form=this._popup.querySelector(".popup__form")}_getInputValues(){const e=Array.from(this._popup.querySelectorAll("input"));return{uInput:e[0].value,dInput:e[1].value}}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._formSubmitHandler(this._getInputValues())}))}close(){super.close(),this._form.reset()}}const o=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),a=document.querySelector("#profile-form"),c=document.querySelector("#cardForm"),p=a.querySelector("#profileName"),u=a.querySelector("#profileJob"),_=new class extends i{constructor(e){super(e),this._lightboxImage=this._popup.querySelector(".popup__image"),this._lightboxCaption=this._popup.querySelector(".popup__image-caption")}open(e,t){this._lightboxImage.src=t,this._lightboxImage.alt=e,this._lightboxCaption.textContent=e,super.open()}}(".lightbox",".popup__image",".popup__image-caption");_.setEventListeners();const h=new class{constructor(e,t){this.name=document.querySelector(e),this.descr=document.querySelector(t)}getUserInfo(){return{name:this.name.textContent,descr:this.descr.textContent}}setUserInfo(e){this.name.textContent=e.name,this.descr.textContent=e.descr}}(".profile__title",".profile__job"),d=new n(s,c),m=new n(s,a);d.enableValidation(),m.enableValidation();const v=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._containerSelector=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._containerSelector.prepend(e)}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:t=>{const s=new e(t,".template",(()=>{_.open(s.title,s.img)}));v.addItem(s.generateCard())}},".elements");v.renderItems();const g=new r(".popup-profile",(e=>{h.setUserInfo({name:e.uInput,descr:e.dInput}),g.close()}));g.setEventListeners();const y=new r(".popup-card",(t=>{const s=new e({name:t.uInput,link:t.dInput},".template",(()=>{_.open(s.name,s.link)}));v.addItem(s.generateCard()),y.close()}));y.setEventListeners(),l.addEventListener("click",(()=>{d.enableValidation(),y.open()})),o.addEventListener("click",(()=>{const e=h.getUserInfo();p.value=e.name,u.value=e.descr,m.enableValidation(),g.open()}))}();